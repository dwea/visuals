<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Biological Pathways Network</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    body { font-family: sans-serif; display: flex; }
    svg { border: 1px solid #ccc; }
    #biomarkers { margin-left: 20px; max-width: 300px; }
    .node { cursor: pointer; fill: steelblue; stroke: #fff; stroke-width: 1.5px; }
    .link { stroke: #999; stroke-opacity: 0.6; }
    text { pointer-events: none; }
  </style>
</head>
<body>
  <svg width="800" height="600"></svg>
  <div id="biomarkers">
    <h3>Biomarkers</h3>
    <ul id="biomarker-list"></ul>
  </div>

  <script>
    const pathways = [
      "Acute-phase protein response",
      "Beta-oxidation of fatty acids",
      "Coagulation pathway",
      "Complement cascade",
      "Glycolysis-gluconeogenesis cycle",
      "Hormone binding and transport",
      "Krebs cycle",
      "Lipid metabolism and transport",
      "Neurotransmitter metabolism",
      "Oxidative stress",
      "Protein metabolism",
      "Urea cycle"
    ];

    const links = [
      { source: "Glycolysis-gluconeogenesis cycle", target: "Krebs cycle" },
      { source: "Krebs cycle", target: "Beta-oxidation of fatty acids" },
      { source: "Beta-oxidation of fatty acids", target: "Lipid metabolism and transport" },
      { source: "Acute-phase protein response", target: "Coagulation pathway" },
      { source: "Acute-phase protein response", target: "Complement cascade" },
      { source: "Hormone binding and transport", target: "Lipid metabolism and transport" },
      { source: "Protein metabolism", target: "Urea cycle" },
      { source: "Neurotransmitter metabolism", target: "Protein metabolism" },
      { source: "Oxidative stress", target: "Acute-phase protein response" }
    ];

    const biomarkerMap = {
      "Acute-phase protein response": ["Serum amyloid A-4 protein", "Haptoglobin", "Fibronectin", "Fibrinogen gamma chain", "Fibrinogen beta chain", "Fibrinogen alpha chain", "Fetuin-B", "Complement C3", "Ceruloplasmin", "C-reactive protein", "Alpha-2-macroglobulin", "Alpha-1-antitrypsin", "Alpha-1-acid glycoprotein 1", "Apolipoprotein D", "Beta-2-glycoprotein 1", "Serotransferrin"],
      "Beta-oxidation of fatty acids": ["Short Chain Acylcarnitines", "Octadecanoylcarnitine", "Octadecadienylcarnitine", "Medium Chain Acylcarnitines", "Long Chain Acylcarnitines", "Hexadecanoylcarnitine", "Carnitine", "Acylcarnitines"],
      "Coagulation pathway": ["von Willebrand Factor", "Vitamin K-dependent protein S", "Prothrombin", "Protein Z-dependent protease inhibitor", "Plasminogen", "Plasma protease C1 inhibitor", "Heparin cofactor 2", "Fibrinogen gamma chain", "Fibrinogen beta chain", "Fibrinogen alpha chain", "Coagulation factor XIII B chain", "Coagulation factor XIII A chain", "Coagulation factor XII", "Coagulation factor XI", "Coagulation factor X", "Coagulation factor IX", "Carboxypeptidase N catalytic chain", "Beta-2-glycoprotein 1"],
      "Complement cascade": ["Complement factor I", "Complement factor H", "Complement factor D", "Complement factor B", "Complement component C9", "Complement component C8 beta chain", "Complement component C8 alpha chain", "Complement component C7", "Complement component C6", "Complement C5", "Complement C4-B", "Complement C3", "Complement C2", "Complement C1s subcomponent", "Complement C1r subcomponent-like protein", "Complement C1r subcomponent", "Complement C1q subcomponent subunit B", "C4b-binding protein alpha chain"],
      "Glycolysis-gluconeogenesis cycle": ["Pyruvic acid", "Lactic acid", "Glutamine", "Glucose", "Alanine"],
      "Hormone binding and transport": ["Vitamin D-binding protein", "Transthyretin", "Thyroxine-binding globulin", "Sex hormone-binding globulin", "Serum albumin", "Retinol-binding protein 4", "Corticosteroid-binding globulin", "Apolipoprotein D", "Apolipoprotein L1"],
      "Krebs cycle": ["Succinic acid", "Pyruvic acid", "Fumaric acid", "Citric acid", "alpha-Ketoglutaric acid"],
      "Lipid metabolism and transport": ["Sphingomyeline C20:2", "Sphingomyeline C16:0", "Sphingolipids", "Lysophospholipids", "Glycerophospholipids", "Retinol-binding protein 4", "Phospholipid transfer protein", "Complement factor D", "Clusterin", "Ceruloplasmin", "Apolipoprotein E", "Apolipoprotein C-IV", "Apolipoprotein C-III", "Apolipoprotein C-II", "Apolipoprotein C-I", "Apolipoprotein B-100", "Apolipoprotein A-I", "Apolipoprotein D", "Apolipoprotein L1"],
      "Neurotransmitter metabolism": ["Homovanillic acid", "5-Hydroxyindole-3-acetic acid", "Tyrosine", "Tryptophan", "Serotonin", "Phenylalanine", "Kynurenine", "Glutamic acid", "Gamma-aminobutyric acid"],
      "Oxidative stress": ["Retinol-binding protein 4", "Peroxiredoxin-2", "Haptoglobin", "Glutathione peroxidase 3", "Ceruloplasmin", "Apolipoprotein D", "Apolipoprotein L1"],
      "Protein metabolism": ["Valine", "Spermidine", "Sarcosine", "Proline", "Phenylalanine", "Leucine", "Glutamine", "Cystatin-C", "Creatinine", "Creatine", "Betaine", "Asparagine", "Arginine", "Alpha-2-antiplasmin", "Alanine", "Protein AMBP", "Serotransferrin", "Cartilage acidic protein 1"],
      "Urea cycle": ["Ornithine", "Glutamine", "Citrulline", "Aspartic acid", "Asparagine", "Arginine", "Acetyl-Ornithine"]
    };

    const nodes = pathways.map(name => ({ id: name }));
    const width = 800, height = 600;

    const svg = d3.select("svg");
    const simulation = d3.forceSimulation(nodes)
      .force("link", d3.forceLink(links).id(d => d.id).distance(140))
      .force("charge", d3.forceManyBody().strength(-400))
      .force("center", d3.forceCenter(width / 2, height / 2))
      .force("collide", d3.forceCollide(40));

    const link = svg.append("g")
      .attr("stroke", "#999")
      .attr("stroke-opacity", 0.6)
      .selectAll("line")
      .data(links)
      .join("line")
      .attr("class", "link");

    const node = svg.append("g")
      .selectAll("circle")
      .data(nodes)
      .join("circle")
      .attr("class", "node")
      .attr("r", 20)
      .call(drag(simulation))
      .on("click", (event, d) => {
        const biomarkers = biomarkerMap[d.id] || [];
        d3.select("#biomarker-list").html(
          biomarkers.map(b => `<li>${b}</li>`).join("")
        );
      });

    const label = svg.append("g")
      .selectAll("text")
      .data(nodes)
      .join("text")
      .text(d => d.id)
      .attr("text-anchor", "middle")
      .attr("dy", 4)
      .style("font-size", "10px");

    simulation.on("tick", () => {
      link
        .attr("x1", d => boundX(d.source.x))
        .attr("y1", d => boundY(d.source.y))
        .attr("x2", d => boundX(d.target.x))
        .attr("y2", d => boundY(d.target.y));

      node
        .attr("cx", d => d.x = boundX(d.x))
        .attr("cy", d => d.y = boundY(d.y));

      label
        .attr("x", d => d.x)
        .attr("y", d => d.y);
    });

    function boundX(x) {
      return Math.max(30, Math.min(width - 30, x));
    }

    function boundY(y) {
      return Math.max(30, Math.min(height - 30, y));
    }

    function drag(simulation) {
      function dragstarted(event, d) {
        if (!event.active) simulation.alphaTarget(0.3).restart();
        d.fx = d.x;
        d.fy = d.y;
      }
      function dragged(event, d) {
        d.fx = event.x;
        d.fy = event.y;
      }
      function dragended(event, d) {
        if (!event.active) simulation.alphaTarget(0);
        d.fx = null;
        d.fy = null;
      }
      return d3.drag()
        .on("start", dragstarted)
        .on("drag", dragged)
        .on("end", dragended);
    }
  </script>
</body>
</html>
